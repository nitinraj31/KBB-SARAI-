<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ShopSphere | Shopping Website</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
    const LoginCard = ({ title, description, actionLabel, helperText, helperLink, role }) => {
      const [status, setStatus] = React.useState("");
      const [isLoading, setIsLoading] = React.useState(false);

      const handleSubmit = async (event) => {
        event.preventDefault();
        const formData = new FormData(event.target);
        const email = formData.get("email");
        const password = formData.get("password");

        setIsLoading(true);
        setStatus("");

        try {
          const response = await fetch("/api/auth/login", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ email, password, role }),
          });

          const payload = await response.json();
          setStatus(payload.message || "Signed in.");
        } catch (error) {
          setStatus("Unable to reach the server. Please try again.");
        } finally {
          setIsLoading(false);
        }
      };

      return (
        <div className={`login-card ${role === "user" ? "alt" : ""}`}>
          <h2>{title}</h2>
          <p>{description}</p>
          <form onSubmit={handleSubmit}>
            <label>
              Email
              <input
                name="email"
                type="email"
                placeholder={role === "admin" ? "admin@shopsphere.com" : "you@email.com"}
                required
              />
            </label>
            <label>
              Password
              <input name="password" type="password" placeholder="Enter your password" required />
            </label>
            <button className="cta full" type="submit" disabled={isLoading}>
              {isLoading ? "Signing in..." : actionLabel}
            </button>
            <span className="helper">
              {helperText} <a href="#">{helperLink}</a>
            </span>
            {status && <span className="status">{status}</span>}
          </form>
        </div>
      );
    };

    const ProductCard = ({ product }) => (
      <div className="product-card">
        <img src={product.image} alt={product.name} />
        <h4>{product.name}</h4>
        <div className="product-price">
          <span className="current-price">${product.price}</span>
          {product.originalPrice && <span className="original-price">${product.originalPrice}</span>}
          {product.discount && <span className="discount">{product.discount}% off</span>}
        </div>
        <div className="product-rating">
          <span>‚≠ê {product.rating}</span>
          <span>({product.reviews} reviews)</span>
        </div>
        <button className="add-to-cart">Add to Cart</button>
      </div>
    );

    const CategoryCard = ({ category }) => (
      <div className="category-card">
        <img src={category.image} alt={category.name} />
        <h4>{category.name}</h4>
      </div>
    );

    const App = () => {
      const categories = [
        { name: "Electronics", image: "https://via.placeholder.com/150?text=Electronics" },
        { name: "Fashion", image: "https://via.placeholder.com/150?text=Fashion" },
        { name: "Home & Kitchen", image: "https://via.placeholder.com/150?text=Home" },
        { name: "Books", image: "https://via.placeholder.com/150?text=Books" },
        { name: "Sports", image: "https://via.placeholder.com/150?text=Sports" },
        { name: "Beauty", image: "https://via.placeholder.com/150?text=Beauty" },
      ];

      const featuredProducts = [
        { id: 1, name: "Wireless Headphones", price: 99, originalPrice: 129, discount: 23, rating: 4.5, reviews: 1200, image: "https://via.placeholder.com/200?text=Headphones" },
        { id: 2, name: "Smartphone", price: 699, originalPrice: 799, discount: 13, rating: 4.7, reviews: 850, image: "https://via.placeholder.com/200?text=Phone" },
        { id: 3, name: "Laptop", price: 1299, originalPrice: 1499, discount: 13, rating: 4.6, reviews: 650, image: "https://via.placeholder.com/200?text=Laptop" },
        { id: 4, name: "Sneakers", price: 89, originalPrice: 119, discount: 25, rating: 4.3, reviews: 950, image: "https://via.placeholder.com/200?text=Sneakers" },
      ];

      const deals = [
        { id: 5, name: "Bluetooth Speaker", price: 49, originalPrice: 79, discount: 38, rating: 4.4, reviews: 600, image: "https://via.placeholder.com/200?text=Speaker" },
        { id: 6, name: "Smart Watch", price: 199, originalPrice: 249, discount: 20, rating: 4.5, reviews: 750, image: "https://via.placeholder.com/200?text=Watch" },
        { id: 7, name: "Gaming Mouse", price: 29, originalPrice: 39, discount: 26, rating: 4.2, reviews: 400, image: "https://via.placeholder.com/200?text=Mouse" },
        { id: 8, name: "Tablet", price: 349, originalPrice: 449, discount: 22, rating: 4.6, reviews: 550, image: "https://via.placeholder.com/200?text=Tablet" },
      ];

      return (
        <>
          <header className="site-header">
            <div className="brand">
              <span className="logo">üõçÔ∏è</span>
              <div>
                <h1>ShopSphere</h1>
                <p>Shop everything you love, fast and secure.</p>
              </div>
            </div>
            <nav>
              <div className="search-bar">
                <input type="text" placeholder="Search for products, brands and more..." />
              </div>
              <a href="#categories">Categories</a>
              <a href="#deals">Deals</a>
              <a href="#account">Account</a>
              <div className="cart-icon">
                <span>üõí</span>
                <span className="cart-count">0</span>
              </div>
              <button className="cta">Login</button>
            </nav>
          </header>

          <nav className="categories-nav">
            <div className="categories-list">
              {categories.map((cat, index) => (
                <a key={index} href="#">{cat.name}</a>
              ))}
            </div>
          </nav>

          <main>
            <section className="hero-banner">
              <div className="banner-content">
                <h2>Big Billion Days Sale!</h2>
                <p>Up to 70% off on electronics, fashion, and more.</p>
                <button className="cta">Shop Now</button>
              </div>
              <img src="https://via.placeholder.com/800x300?text=Sale+Banner" alt="Sale Banner" />
            </section>

            <section id="categories" className="categories-section">
              <h2>Shop by Category</h2>
              <div className="categories-grid">
                {categories.map((cat, index) => (
                  <CategoryCard key={index} category={cat} />
                ))}
              </div>
            </section>

            <section className="featured-products">
              <h2>Featured Products</h2>
              <div className="products-grid">
                {featuredProducts.map(product => (
                  <ProductCard key={product.id} product={product} />
                ))}
              </div>
            </section>

            <section id="deals" className="deals-section">
              <h2>Today's Deals</h2>
              <div className="products-grid">
                {deals.map(product => (
                  <ProductCard key={product.id} product={product} />
                ))}
              </div>
            </section>

            <section id="account" className="account-section">
              <LoginCard
                title="Login / Signup"
                description="Get access to your orders, wishlist and recommendations."
                actionLabel="Login"
                helperText="New to ShopSphere?"
                helperLink="Create an account"
                role="user"
              />
            </section>
          </main>

          <footer>
            <div>
              <h3>ShopSphere</h3>
              <p>India's leading e-commerce platform.</p>
            </div>
            <div className="footer-links">
              <a href="#">About Us</a>
              <a href="#">Careers</a>
              <a href="#">Sell on ShopSphere</a>
              <a href="#">Help Center</a>
            </div>
          </footer>
        </>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
