<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AgriMarket | Agriculture Marketplace</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
    const LoginCard = ({ title, description, actionLabel, helperText, helperLink, role }) => {
      const [status, setStatus] = React.useState("");
      const [isLoading, setIsLoading] = React.useState(false);

      const handleSubmit = async (event) => {
        event.preventDefault();
        const formData = new FormData(event.target);
        const email = formData.get("email");
        const password = formData.get("password");

        setIsLoading(true);
        setStatus("");

        try {
          const response = await fetch("/api/auth/login", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ email, password, role }),
          });

          const payload = await response.json();
          setStatus(payload.message || "Signed in.");
        } catch (error) {
          setStatus("Unable to reach the server. Please try again.");
        } finally {
          setIsLoading(false);
        }
      };

      return (
        <div className={`login-card ${role === "user" ? "alt" : ""}`}>
          <h2>{title}</h2>
          <p>{description}</p>
          <form onSubmit={handleSubmit}>
            <label>
              Email
              <input
                name="email"
                type="email"
                placeholder={role === "admin" ? "admin@agrimarket.com" : "you@email.com"}
                required
              />
            </label>
            <label>
              Password
              <input name="password" type="password" placeholder="Enter your password" required />
            </label>
            <button className="cta full" type="submit" disabled={isLoading}>
              {isLoading ? "Signing in..." : actionLabel}
            </button>
            <span className="helper">
              {helperText} <a href="#">{helperLink}</a>
            </span>
            {status && <span className="status">{status}</span>}
          </form>
        </div>
      );
    };

    const ProductCard = ({ product }) => (
      <div className="product-card">
        <img src={product.image} alt={product.name} />
        <h4>{product.name}</h4>
        <div className="product-price">
          <span className="current-price">${product.price}</span>
          {product.originalPrice && <span className="original-price">${product.originalPrice}</span>}
          {product.discount && <span className="discount">{product.discount}% off</span>}
        </div>
        <div className="product-rating">
          <span>‚≠ê {product.rating}</span>
          <span>({product.reviews} reviews)</span>
        </div>
        <button className="add-to-cart">Add to Cart</button>
      </div>
    );

    const CategoryCard = ({ category }) => (
      <div className="category-card">
        <img src={category.image} alt={category.name} />
        <h4>{category.name}</h4>
      </div>
    );

    const App = () => {
      const categories = [
        { name: "Seeds", image: "https://via.placeholder.com/150?text=Seeds" },
        { name: "Fertilizers", image: "https://via.placeholder.com/150?text=Fertilizers" },
        { name: "Tools", image: "https://via.placeholder.com/150?text=Tools" },
        { name: "Machinery", image: "https://via.placeholder.com/150?text=Machinery" },
        { name: "Produce", image: "https://via.placeholder.com/150?text=Produce" },
        { name: "Livestock", image: "https://via.placeholder.com/150?text=Livestock" },
      ];

      const featuredProducts = [
        { id: 1, name: "John Deere Tractor", price: 25000, originalPrice: 28000, discount: 11, rating: 4.8, reviews: 450, image: "https://via.placeholder.com/200?text=Tractor" },
        { id: 2, name: "Organic Seed Pack", price: 25, originalPrice: 35, discount: 29, rating: 4.6, reviews: 320, image: "https://via.placeholder.com/200?text=Seeds" },
        { id: 3, name: "NPK Fertilizer 50kg", price: 45, originalPrice: 55, discount: 18, rating: 4.4, reviews: 280, image: "https://via.placeholder.com/200?text=Fertilizer" },
        { id: 4, name: "Farm Tools Set", price: 120, originalPrice: 150, discount: 20, rating: 4.5, reviews: 190, image: "https://via.placeholder.com/200?text=Tools" },
      ];

      const deals = [
        { id: 5, name: "Irrigation System", price: 299, originalPrice: 399, discount: 25, rating: 4.3, reviews: 180, image: "https://via.placeholder.com/200?text=Irrigation" },
        { id: 6, name: "Pesticide Spray", price: 35, originalPrice: 50, discount: 30, rating: 4.1, reviews: 220, image: "https://via.placeholder.com/200?text=Spray" },
        { id: 7, name: "Harvesting Tools", price: 85, originalPrice: 110, discount: 23, rating: 4.4, reviews: 150, image: "https://via.placeholder.com/200?text=Harvest" },
        { id: 8, name: "Greenhouse Kit", price: 450, originalPrice: 600, discount: 25, rating: 4.6, reviews: 90, image: "https://via.placeholder.com/200?text=Greenhouse" },
      ];

      return (
        <>
          <header className="site-header">
            <div className="brand">
              <span className="logo">üåæ</span>
              <div>
                <h1>AgriMarket</h1>
                <p>Grow your farm with quality products and supplies.</p>
              </div>
            </div>
            <nav>
              <div className="search-bar">
                <input type="text" placeholder="Search for seeds, tools, machinery and more..." />
              </div>
              <a href="#categories">Categories</a>
              <a href="#deals">Deals</a>
              <a href="#account">Account</a>
              <div className="cart-icon">
                <span>üõí</span>
                <span className="cart-count">0</span>
              </div>
              <button className="cta">Login</button>
            </nav>
          </header>

          <nav className="categories-nav">
            <div className="categories-list">
              {categories.map((cat, index) => (
                <a key={index} href="#">{cat.name}</a>
              ))}
            </div>
          </nav>

          <main>
            <section className="hero-banner">
              <div className="banner-content">
                <h2>Harvest Season Sale!</h2>
                <p>Up to 50% off on tractors, seeds, fertilizers, and farming equipment.</p>
                <button className="cta">Shop Now</button>
              </div>
              <img src="https://via.placeholder.com/800x300?text=Harvest+Sale" alt="Harvest Sale Banner" />
            </section>

            <section id="categories" className="categories-section">
              <h2>Shop by Category</h2>
              <div className="categories-grid">
                {categories.map((cat, index) => (
                  <CategoryCard key={index} category={cat} />
                ))}
              </div>
            </section>

            <section className="featured-products">
              <h2>Featured Products</h2>
              <div className="products-grid">
                {featuredProducts.map(product => (
                  <ProductCard key={product.id} product={product} />
                ))}
              </div>
            </section>

            <section id="deals" className="deals-section">
              <h2>Today's Deals</h2>
              <div className="products-grid">
                {deals.map(product => (
                  <ProductCard key={product.id} product={product} />
                ))}
              </div>
            </section>

            <section id="account" className="account-section">
              <LoginCard
                title="Login / Signup"
                description="Get access to your orders, wishlist and recommendations."
                actionLabel="Login"
                helperText="New to AgriMarket?"
                helperLink="Create an account"
                role="user"
              />
            </section>
          </main>

          <footer>
            <div>
              <h3>AgriMarket</h3>
              <p>Empowering farmers worldwide with quality products and supplies.</p>
            </div>
            <div className="footer-links">
              <a href="#">About Us</a>
              <a href="#">Careers</a>
              <a href="#">Sell on AgriMarket</a>
              <a href="#">Help Center</a>
            </div>
          </footer>
        </>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
